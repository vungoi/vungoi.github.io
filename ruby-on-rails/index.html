<h3>0) Cài đặt Ruby và Rails</h3>
Tải Ruby 2.2.x tại http://rubyinstaller.org/downloads/.<br>
Cài đặt Rails: mở Command Prompt rồi gõ lệnh C:\Users\tri>gem install rails. <br>
<h3>1) Models</h3>
Tạo project blog: C:\PROJECTS>rails new blog. <br>
<pre><code class="language-batch">blog/
    app/
    bin/
    config/</code></pre>
Chạy server: C:\PROJECTS\blog>rails server. <br>
Mở trình duyệt rồi vào địa chỉ http://localhost:3000/ để xem thông báo của server. <br>
Tạo controller "Welcome" và action "index": C:\PROJECTS\blog>bin/rails generate controller Welcome index. <br>
Mở file app/views/welcome/index.html.erb thêm code: <br>
<pre><code class="language-markup">&lt;h1&gt;Hello, Rails!&lt;/h1&gt;</code></pre>
Mở file config/routes.rb thêm code: <br>
<pre><code class="language-ruby">Rails.application.routes.draw do
  get 'welcome/index'
  root 'welcome#index'
end</code></pre>
Chạy lại server rồi vào địa chỉ http://localhost:3000/ sẽ thấy thông báo "Hello, Rails!". <br>
<h3>2) Resource</h3>
Mở file config/routes.rb thêm resource article: <br>
<pre><code class="language-ruby">Rails.application.routes.draw do
  get 'welcome/index'
  resources :articles
  root 'welcome#index'
end</code></pre>
Chạy lệnh C:\PROJECTS\blog>bin/rails routes ta sẽ thấy các routes của RESTful actions. <br>
<pre><code class="language-batch">      Prefix Verb   URI Pattern                  Controller#Action
    articles GET    /articles(.:format)          articles#index
             POST   /articles(.:format)          articles#create
 new_article GET    /articles/new(.:format)      articles#new
edit_article GET    /articles/:id/edit(.:format) articles#edit
     article GET    /articles/:id(.:format)      articles#show
             PATCH  /articles/:id(.:format)      articles#update
             PUT    /articles/:id(.:format)      articles#update
             DELETE /articles/:id(.:format)      articles#destroy
        root GET    /                            welcome#index</code></pre>
<h3>3) ArticlesController</h3>
Tạo controller "ArticlesController": C:\PROJECTS\blog>bin/rails generate controller Articles. <br>
Mở file app/controllers/articles_controller.rb để thêm các hàm chức năng: <br>
<pre><code class="language-ruby">class ArticlesController < ApplicationController
  def new
  end
end</code></pre>
Tạo file template app/views/articles/new.html.erb cho view thêm mới article: <br>
<pre><code class="language-markup">&lt;h1&gt;New Article&lt;/h1&gt;</code></pre>
<h3>4) Forms</h3>
Sửa file template app/views/articles/new.html.erb cho thêm mới article: <br>
<pre><code class="language-markup">&lt;%= form_for :article, url: articles_path do |f| %&gt;
  &lt;p&gt;
    &lt;%= f.label :title %&gt;&lt;br&gt;
    &lt;%= f.text_field :title %&gt;
  &lt;/p&gt;
 
  &lt;p&gt;
    &lt;%= f.label :text %&gt;&lt;br&gt;
    &lt;%= f.text_area :text %&gt;
  &lt;/p&gt;
 
  &lt;p&gt;
    &lt;%= f.submit %&gt;
  &lt;/p&gt;
&lt;% end %&gt;</code></pre>
<h3>5) Creating articles</h3>
Hiện thực hàm create() trong file app/controllers/articles_controller.rb để xử lý dữ liệu submit về: <br>
<pre><code class="language-ruby">class ArticlesController < ApplicationController
  def new
  end
  def create
  end
end</code></pre>
<h3>6) Creating the Article model</h3>
Tạo model Article: C:\PROJECTS\blog>bin/rails generate model Article title:string text:text. <br>
Mở file db/migrate/YYYYMMDDHHMMSS_create_articles.rb xem cấu trúc bảng articles trong database. <br>
<pre><code class="language-ruby">class CreateArticles < ActiveRecord::Migration[5.0]
  def change
    create_table :articles do |t|
      t.string :title
      t.text :text
      t.timestamps
    end
  end
end</code></pre>
Migrate cấu trúc bảng articles vào database: C:\PROJECTS\blog>bin/rails db:migrate<br>
<h3>7) Saving data in the controller</h3>
Sửa lại hàm create() trong file app/controllers/articles_controller.rb để xử lý dữ liệu submit về: <br>
<pre><code class="language-ruby">def create
  @article = Article.new(article_params)
  @article.save
  redirect_to @article
end
private
  def article_params
    params.require(:article).permit(:title, :text)
  end</code></pre>
<h3>8) Showing Articles</h3>
Thêm hàm show() trong file app/controllers/articles_controller.rb để hiển thị chi tiết article: <br>
<pre><code class="language-ruby">class ArticlesController < ApplicationController
  def show
    @article = Article.find(params[:id])
  end</code></pre>
Tạo file template app/views/articles/show.html.erb để hiển thị nội dung article. <br>
<pre><code class="language-markup">&lt;p&gt;
  &lt;strong&gt;Title:&lt;/strong&gt;
  &lt;%= @article.title %&gt;
&lt;/p&gt;
&lt;p&gt;
  &lt;strong&gt;Text:&lt;/strong&gt;
  &lt;%= @article.text %&gt;
&lt;/p&gt;</code></pre>
<h3>9) Listing all articles</h3>
Sửa hàm index() trong file app/controllers/articles_controller.rb để hiển thị tất cả articles: <br>
<pre><code class="language-ruby">class ArticlesController < ApplicationController
  def index
    @articles = Article.all
  End</code></pre>
Tạo file template app/views/articles/index.html.erb để hiển thị danh sách articles. <br>
<pre><code class="language-markup">&lt;h1&gt;Listing articles&lt;/h1&gt;
&lt;table&gt;
  &lt;tr&gt;
    &lt;th&gt;Title&lt;/th&gt;
    &lt;th&gt;Text&lt;/th&gt;
  &lt;/tr&gt;
  &lt;% @articles.each do |article| %&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;%= article.title %&gt;&lt;/td&gt;
      &lt;td&gt;&lt;%= article.text %&gt;&lt;/td&gt;
      &lt;td&gt;&lt;%= link_to 'Show', article_path(article) %&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;% end %&gt;
&lt;/table&gt;</code></pre>
<h3>10) Adding links</h3>
Mở file app/views/welcome/index.html.erb để thêm đường link đến trang danh sách articles: <br>
<pre><code class="language-markup">&lt;h1&gt;Hello, Rails!&lt;/h1&gt;
&lt;%= link_to 'My Blog', controller: 'articles' %&gt;</code></pre>
Mở file app/views/articles/index.html.erb để thêm đường link đến trang tạo mới article: <br>
<pre><code class="language-markup">&lt;%= link_to 'New article', new_article_path %&gt;</code></pre>
Mở file app/views/articles/new.html.erb để thêm đường link trở về trang danh sách articles: <br>
<pre><code class="language-markup">&lt;%= form_for :article, url: articles_path do |f| %&gt;
  ...
&lt;% end %&gt;
&lt;%= link_to 'Back', articles_path %&gt;</code></pre>
Mở file app/views/articles/show.html.erb để thêm đường link trở về trang danh sách articles: <br>
<pre><code class="language-markup">&lt;p&gt;
  &lt;strong&gt;Title:&lt;/strong&gt;
  &lt;%= @article.title %&gt;
&lt;/p&gt;
&lt;p&gt;
  &lt;strong&gt;Text:&lt;/strong&gt;
  &lt;%= @article.text %&gt;
&lt;/p&gt;
&lt;%= link_to 'Back', articles_path %&gt;</code></pre>
<h3>11) Adding Some Validation</h3>
Mở file app/models/article.rb để thêm code kiểm tra tính hợp lệ của Article: <br>
<pre><code class="language-ruby">class Article < ApplicationRecord
  validates :title, presence: true,
                    length: { minimum: 5 }
end</code></pre>
Mở file app/controllers/articles_controller.rb để thêm code kiểm tra tính hợp lệ của Article: <br>
<pre><code class="language-ruby">def new
  @article = Article.new
end
def create
  @article = Article.new(article_params)
  if @article.save
    redirect_to @article
  else
    render 'new'
  end
end
private
  def article_params
    params.require(:article).permit(:title, :text)
  end</code></pre>
Mở file app/views/articles/new.html.erb để thêm code hiển thị thông báo lỗi: <br>
<pre><code class="language-markup">&lt;%= form_for :article, url: articles_path do |f| %&gt;
  &lt;% if @article.errors.any? %&gt;
    &lt;div id="error_explanation"&gt;
      &lt;h2&gt;
        &lt;%= pluralize(@article.errors.count, "error") %&gt; prohibited
        this article from being saved:
      &lt;/h2&gt;
      &lt;ul&gt;
        &lt;% @article.errors.full_messages.each do |msg| %&gt;
          &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;
        &lt;% end %&gt;
      &lt;/ul&gt;
    &lt;/div&gt;
  &lt;% end %&gt;
  &lt;p&gt;
    &lt;%= f.label :title %&gt;&lt;br&gt;
    &lt;%= f.text_field :title %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= f.label :text %&gt;&lt;br&gt;
    &lt;%= f.text_area :text %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= f.submit %&gt;
  &lt;/p&gt;
&lt;% end %&gt;
&lt;%= link_to 'Back', articles_path %&gt;</code></pre>
<h3>12) Updating Articles</h3>
Mở file app/controllers/articles_controller.rb để thêm action edit: <br>
<pre><code class="language-ruby">def new
  @article = Article.new
end
def edit
  @article = Article.find(params[:id])
end
def create
  @article = Article.new(article_params)
  if @article.save
    redirect_to @article
  else
    render 'new'
  end
end</code></pre>
Tạo file template app/views/articles/edit.html.erb để chỉnh sửa article. <br>
<pre><code class="language-markup">&lt;h1&gt;Edit article&lt;/h1&gt;
&lt;%= form_for(@article) do |f| %&gt;
  &lt;% if @article.errors.any? %&gt;
    &lt;div id="error_explanation"&gt;
      &lt;h2&gt;
        &lt;%= pluralize(@article.errors.count, "error") %&gt; prohibited
        this article from being saved:
      &lt;/h2&gt;
      &lt;ul&gt;
        &lt;% @article.errors.full_messages.each do |msg| %&gt;
          &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;
        &lt;% end %&gt;
      &lt;/ul&gt;
    &lt;/div&gt;
  &lt;% end %&gt;
  &lt;p&gt;
    &lt;%= f.label :title %&gt;&lt;br&gt;
    &lt;%= f.text_field :title %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= f.label :text %&gt;&lt;br&gt;
    &lt;%= f.text_area :text %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= f.submit %&gt;
  &lt;/p&gt;
&lt;% end %&gt;
&lt;%= link_to 'Back', articles_path %&gt;</code></pre>
Thêm hàm update() trong file app/controllers/articles_controller.rb để cập nhật dữ liệu submit về: <br>
<pre><code class="language-ruby">def create
  @article = Article.new(article_params)
  if @article.save
    redirect_to @article
  else
    render 'new'
  end
end
def update
  @article = Article.find(params[:id])
  if @article.update(article_params)
    redirect_to @article
  else
    render 'edit'
  end
end
private
  def article_params
    params.require(:article).permit(:title, :text)
  end</code></pre>
Mở file app/views/articles/index.html.erb để thêm đường link đến trang chỉnh sửa article: <br>
<pre><code class="language-markup">&lt;table&gt;
  &lt;tr&gt;
    &lt;th&gt;Title&lt;/th&gt;
    &lt;th&gt;Text&lt;/th&gt;
    &lt;th colspan="2"&gt;&lt;/th&gt;
  &lt;/tr&gt;
  &lt;% @articles.each do |article| %&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;%= article.title %&gt;&lt;/td&gt;
      &lt;td&gt;&lt;%= article.text %&gt;&lt;/td&gt;
      &lt;td&gt;&lt;%= link_to 'Show', article_path(article) %&gt;&lt;/td&gt;
      &lt;td&gt;&lt;%= link_to 'Edit', edit_article_path(article) %&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;% end %&gt;
&lt;/table&gt;</code></pre>
Mở file app/views/articles/show.html.erb để thêm đường link đến trang chỉnh sửa article: <br>
<pre><code class="language-markup">...
&lt;%= link_to 'Edit', edit_article_path(@article) %&gt; |
&lt;%= link_to 'Back', articles_path %&gt;</code></pre>
<h3>13) Using partials to clean up duplication in views</h3>
Tạo file template app/views/articles/_form.html.erb để thêm mới hay chỉnh sửa article. <br>
<pre><code class="language-markup">&lt;%= form_for @article do |f| %&gt;
  &lt;% if @article.errors.any? %&gt;
    &lt;div id="error_explanation"&gt;
      &lt;h2&gt;
        &lt;%= pluralize(@article.errors.count, "error") %&gt; prohibited
        this article from being saved:
      &lt;/h2&gt;
      &lt;ul&gt;
        &lt;% @article.errors.full_messages.each do |msg| %&gt;
          &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;
        &lt;% end %&gt;
      &lt;/ul&gt;
    &lt;/div&gt;
  &lt;% end %&gt;
  &lt;p&gt;
    &lt;%= f.label :title %&gt;&lt;br&gt;
    &lt;%= f.text_field :title %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= f.label :text %&gt;&lt;br&gt;
    &lt;%= f.text_area :text %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= f.submit %&gt;
  &lt;/p&gt;
&lt;% end %&gt;</code></pre>
Sửa file template app/views/articles/new.html.erb để sử dụng partial view: <br>
<pre><code class="language-markup">&lt;h1&gt;New article&lt;/h1&gt;
&lt;%= render 'form' %&gt;
&lt;%= link_to 'Back', articles_path %&gt;</code></pre>
Tương tự sửa file template app/views/articles/edit.html.erb để sử dụng partial view: <br>
<pre><code class="language-markup">&lt;h1&gt;Edit article&lt;/h1&gt;
&lt;%= render 'form' %&gt;
&lt;%= link_to 'Back', articles_path %&gt;</code></pre>
<h3>14) Deleting Articles</h3>
Mở file app/controllers/articles_controller.rb để thêm action destroy: <br>
<pre><code class="language-ruby">class ArticlesController < ApplicationController
  def index
    @articles = Article.all
  end
  def show
    @article = Article.find(params[:id])
  end
  def new
    @article = Article.new
  end
  def edit
    @article = Article.find(params[:id])
  end
  def create
    @article = Article.new(article_params)
    if @article.save
      redirect_to @article
    else
      render 'new'
    end
  end
  def update
    @article = Article.find(params[:id])
    if @article.update(article_params)
      redirect_to @article
    else
      render 'edit'
    end
  end
  def destroy
    @article = Article.find(params[:id])
    @article.destroy
    redirect_to articles_path
  end
  private
    def article_params
      params.require(:article).permit(:title, :text)
    end
end</code></pre>
Mở file app/views/articles/index.html.erb để thêm nút xóa article: <br>
<pre><code class="language-markup">&lt;h1&gt;Listing Articles&lt;/h1&gt;
&lt;%= link_to 'New article', new_article_path %&gt;
&lt;table&gt;
  &lt;tr&gt;
    &lt;th&gt;Title&lt;/th&gt;
    &lt;th&gt;Text&lt;/th&gt;
    &lt;th colspan="3"&gt;&lt;/th&gt;
  &lt;/tr&gt;
  &lt;% @articles.each do |article| %&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;%= article.title %&gt;&lt;/td&gt;
      &lt;td&gt;&lt;%= article.text %&gt;&lt;/td&gt;
      &lt;td&gt;&lt;%= link_to 'Show', article_path(article) %&gt;&lt;/td&gt;
      &lt;td&gt;&lt;%= link_to 'Edit', edit_article_path(article) %&gt;&lt;/td&gt;
      &lt;td&gt;&lt;%= link_to 'Destroy', article_path(article),
              method: :delete,
              data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;% end %&gt;
&lt;/table&gt;</code></pre>
Congratulations, you can now create, show, list, update and destroy articles. <br>
<h3>15) Adding a Second Model</h3>
Tạo model Comment tham chiếu đến Article: C:\PROJECTS\blog>bin/rails generate model Comment commenter:string body:text article:references.
Mở file db/migrate/YYYYMMDDHHMMSS_create_comments.rb xem cấu trúc bảng comments trong database. <br>
<pre><code class="language-ruby">class CreateComments < ActiveRecord::Migration[5.0]
  def change
    create_table :comments do |t|
      t.string :commenter
      t.text :body
      t.references :article, foreign_key: true
      t.timestamps
    end
  end
end</code></pre>
Migrate cấu trúc bảng comments vào database: C:\PROJECTS\blog>bin/rails db:migrate<br>
<h3>16) Associating Models</h3>
Mở file app/models/article.rb để thêm tham chiếu đến Comment: <br>
<pre><code class="language-ruby">class Article < ApplicationRecord
  has_many :comments
  validates :title, presence: true,
                    length: { minimum: 5 }
end</code></pre>
<h3>17) Adding a Route for Comments</h3>
Mở file config/routes.rb thêm resource comments: <br>
<pre><code class="language-ruby">resources :articles do
  resources :comments
end</code></pre>
<h3>18) Generating Comments Controller</h3>
Tạo controller "CommentsController": C:\PROJECTS\blog>bin/rails generate controller Comments. <br>
Mở file app/views/articles/show.html.erb để thêm tạo mới comment: <br>
<pre><code class="language-markup">&lt;p&gt;
  &lt;strong&gt;Title:&lt;/strong&gt;
  &lt;%= @article.title %&gt;
&lt;/p&gt;
&lt;p&gt;
  &lt;strong&gt;Text:&lt;/strong&gt;
  &lt;%= @article.text %&gt;
&lt;/p&gt;
&lt;h2&gt;Add a comment:&lt;/h2&gt;
&lt;%= form_for([@article, @article.comments.build]) do |f| %&gt;
  &lt;p&gt;
    &lt;%= f.label :commenter %&gt;&lt;br&gt;
    &lt;%= f.text_field :commenter %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= f.label :body %&gt;&lt;br&gt;
    &lt;%= f.text_area :body %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= f.submit %&gt;
  &lt;/p&gt;
&lt;% end %&gt;
&lt;%= link_to 'Edit', edit_article_path(@article) %&gt; |
&lt;%= link_to 'Back', articles_path %&gt;</code></pre>
Mở file app/controllers/comments_controller.rb để thêm các hàm chức năng: <br>
<pre><code class="language-ruby">class CommentsController < ApplicationController
  def create
    @article = Article.find(params[:article_id])
    @comment = @article.comments.create(comment_params)
    redirect_to article_path(@article)
  end
  private
    def comment_params
      params.require(:comment).permit(:commenter, :body)
    end
end</code></pre>
Sửa file template app/views/articles/show.html.erb để hiển thị danh sách comments. <br>
<pre><code class="language-markup">&lt;p&gt;
  &lt;strong&gt;Title:&lt;/strong&gt;
  &lt;%= @article.title %&gt;
&lt;/p&gt;
&lt;p&gt;
  &lt;strong&gt;Text:&lt;/strong&gt;
  &lt;%= @article.text %&gt;
&lt;/p&gt;
&lt;h2&gt;Comments&lt;/h2&gt;
&lt;% @article.comments.each do |comment| %&gt;
  &lt;p&gt;
    &lt;strong&gt;Commenter:&lt;/strong&gt;
    &lt;%= comment.commenter %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;strong&gt;Comment:&lt;/strong&gt;
    &lt;%= comment.body %&gt;
  &lt;/p&gt;
&lt;% end %&gt;
&lt;h2&gt;Add a comment:&lt;/h2&gt;
&lt;%= form_for([@article, @article.comments.build]) do |f| %&gt;
  &lt;p&gt;
    &lt;%= f.label :commenter %&gt;&lt;br&gt;
    &lt;%= f.text_field :commenter %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= f.label :body %&gt;&lt;br&gt;
    &lt;%= f.text_area :body %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= f.submit %&gt;
  &lt;/p&gt;
&lt;% end %&gt;
&lt;%= link_to 'Edit', edit_article_path(@article) %&gt; |
&lt;%= link_to 'Back', articles_path %&gt;</code></pre>
<h3>19) Refactoring/Rendering Partial Collections</h3>
Tạo file template app/views/comments/_comment.html.erb để hiển thị comment. <br>
<pre><code class="language-markup">&lt;p&gt;
  &lt;strong&gt;Commenter:&lt;/strong&gt;
  &lt;%= comment.commenter %&gt;
&lt;/p&gt;
&lt;p&gt;
  &lt;strong&gt;Comment:&lt;/strong&gt;
  &lt;%= comment.body %&gt;
&lt;/p&gt;</code></pre>
Mở file app/views/articles/show.html.erb để sử dụng partial view: <br>
<pre><code class="language-markup">&lt;p&gt;
  &lt;strong&gt;Title:&lt;/strong&gt;
  &lt;%= @article.title %&gt;
&lt;/p&gt;
&lt;p&gt;
  &lt;strong&gt;Text:&lt;/strong&gt;
  &lt;%= @article.text %&gt;
&lt;/p&gt;
&lt;h2&gt;Comments&lt;/h2&gt;
&lt;%= render @article.comments %&gt;
&lt;h2&gt;Add a comment:&lt;/h2&gt;
&lt;%= form_for([@article, @article.comments.build]) do |f| %&gt;
  &lt;p&gt;
    &lt;%= f.label :commenter %&gt;&lt;br&gt;
    &lt;%= f.text_field :commenter %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= f.label :body %&gt;&lt;br&gt;
    &lt;%= f.text_area :body %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= f.submit %&gt;
  &lt;/p&gt;
&lt;% end %&gt;
&lt;%= link_to 'Edit', edit_article_path(@article) %&gt; |
&lt;%= link_to 'Back', articles_path %&gt;</code></pre>
<h3>20) Rendering a Partial Form</h3>
Tạo file template app/views/comments/_form.html.erb để hiển thị form comment. <br>
<pre><code class="language-markup">&lt;%= form_for([@article, @article.comments.build]) do |f| %&gt;
  &lt;p&gt;
    &lt;%= f.label :commenter %&gt;&lt;br&gt;
    &lt;%= f.text_field :commenter %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= f.label :body %&gt;&lt;br&gt;
    &lt;%= f.text_area :body %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= f.submit %&gt;
  &lt;/p&gt;
&lt;% end %&gt;</code></pre>
Mở file app/views/articles/show.html.erb để sử dụng partial view: <br>
<pre><code class="language-markup">&lt;p&gt;
  &lt;strong&gt;Title:&lt;/strong&gt;
  &lt;%= @article.title %&gt;
&lt;/p&gt;
&lt;p&gt;
  &lt;strong&gt;Text:&lt;/strong&gt;
  &lt;%= @article.text %&gt;
&lt;/p&gt;
&lt;h2&gt;Comments&lt;/h2&gt;
&lt;%= render @article.comments %&gt;
&lt;h2&gt;Add a comment:&lt;/h2&gt;
&lt;%= render 'comments/form' %&gt;
&lt;%= link_to 'Edit', edit_article_path(@article) %&gt; |
&lt;%= link_to 'Back', articles_path %&gt;</code></pre>
<h3>21) Deleting Comments</h3>
Mở file app/views/comments/_comment.html.erb để thêm nút xóa comment: <br>
<pre><code class="language-markup">&lt;p&gt;
  &lt;strong&gt;Commenter:&lt;/strong&gt;
  &lt;%= comment.commenter %&gt;
&lt;/p&gt;
&lt;p&gt;
  &lt;strong&gt;Comment:&lt;/strong&gt;
  &lt;%= comment.body %&gt;
&lt;/p&gt;
&lt;p&gt;
  &lt;%= link_to 'Destroy Comment', [comment.article, comment],
               method: :delete,
               data: { confirm: 'Are you sure?' } %&gt;
&lt;/p&gt;</code></pre>
Mở file app/controllers/comments_controller.rb để thêm action destroy: <br>
<pre><code class="language-ruby">class CommentsController < ApplicationController
  def create
    @article = Article.find(params[:article_id])
    @comment = @article.comments.create(comment_params)
    redirect_to article_path(@article)
  end
  def destroy
    @article = Article.find(params[:article_id])
    @comment = @article.comments.find(params[:id])
    @comment.destroy
    redirect_to article_path(@article)
  end
  private
    def comment_params
      params.require(:comment).permit(:commenter, :body)
    end
end</code></pre>
<h3>22) Deleting Associated Objects</h3>
Mở file app/models/article.rb để xóa comments phụ thuộc khi ta xóa article: <br>
<pre><code class="language-ruby">class Article < ApplicationRecord
  has_many :comments, dependent: :destroy
  validates :title, presence: true,
                    length: { minimum: 5 }
end</code></pre>
<h3>23) Security</h3>
Mở file app/controllers/articles_controller.rb để thêm xác thực: <br>
<pre><code class="language-ruby">class ArticlesController < ApplicationController
  http_basic_authenticate_with name: "dhh", password: "secret", except: [:index, :show]
  def index
    @articles = Article.all
  end</code></pre>
Mở file app/controllers/comments_controller.rb để thêm xác thực: <br>
<pre><code class="language-ruby">class CommentsController < ApplicationController
  http_basic_authenticate_with name: "dhh", password: "secret", only: :destroy
  def create
    @article = Article.find(params[:article_id])
    # ...
  end</code></pre>

